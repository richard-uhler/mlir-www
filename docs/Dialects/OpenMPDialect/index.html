<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>'omp' Dialect - MLIR</title><meta name=description content="Multi-Level IR Compiler Framework"><meta name=generator content="Hugo 0.64.1"><link href=https://mlir.llvm.org/index.xml rel=alternate type=application/rss+xml><link rel=canonical href=https://mlir.llvm.org/docs/Dialects/OpenMPDialect/><link rel=stylesheet href=https://mlir.llvm.org/css/theme.css><script src=https://use.fontawesome.com/releases/v5.0.6/js/all.js></script><link rel=stylesheet href=https://mlir.llvm.org/css/chroma.min.css><script src=https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js></script><script src=https://cdn.jsdelivr.net/npm/jquery.easing@1.4.1/jquery.easing.min.js></script><script src=https://mlir.llvm.org/js/bundle.js></script><style>:root{}</style></head><body><div class=container><header><h1><div><img src=https://mlir.llvm.org//mlir-logo.png width=40px align=absmiddle>
MLIR</div></h1><p class=description>Multi-Level IR Compiler Framework</p></header><div class=global-menu><nav><ul><li class=parent><a href>Community<i class="fas fa-angle-right"></i></a><ul class=sub-menu><li class=child><a href=https://llvm.discourse.group/c/mlir/31>Forums</a></li><li class=child><a href=https://discord.gg/xS7Z362>Chat</a></li></ul></li><li><a href=/getting_started/Debugging/>Debugging</a></li><li><a href=/getting_started/Faq/>FAQ</a></li><li class=parent><a href=https://github.com/llvm/llvm-project/tree/master/mlir>Source<i class="fas fa-angle-right"></i></a><ul class=sub-menu><li class=child><a href=/doxygen/>Doxygen</a></li><li class=child><a href=https://github.com/llvm/llvm-project/tree/master/mlir>GitHub</a></li></ul></li><li><a href="https://bugs.llvm.org/buglist.cgi?bug_status=__open__&list_id=177877&order=changeddate%20DESC%2Cpriority%2Cbug_severity&product=MLIR&query_format=specific">Bugs</a></li></ul></nav></div><div class=content-container><main><h1>'omp' Dialect</h1><p><nav id=TableOfContents><ul><li><a href=#operation-definition>Operation definition</a><ul><li><a href=#ompbarrier-mlirompbarrierop>omp.barrier (::mlir::omp::BarrierOp)</a></li><li><a href=#ompflush-mlirompflushop>omp.flush (::mlir::omp::FlushOp)</a></li><li><a href=#ompmaster-mlirompmasterop>omp.master (::mlir::omp::MasterOp)</a></li><li><a href=#ompparallel-mlirompparallelop>omp.parallel (::mlir::omp::ParallelOp)</a></li><li><a href=#omptaskwait-mliromptaskwaitop>omp.taskwait (::mlir::omp::TaskwaitOp)</a></li><li><a href=#omptaskyield-mliromptaskyieldop>omp.taskyield (::mlir::omp::TaskyieldOp)</a></li><li><a href=#ompterminator-mlirompterminatorop>omp.terminator (::mlir::omp::TerminatorOp)</a></li><li><a href=#ompwsloop-mlirompwsloopop>omp.wsloop (::mlir::omp::WsLoopOp)</a></li><li><a href=#ompyield-mlirompyieldop>omp.yield (::mlir::omp::YieldOp)</a></li></ul></li></ul></nav><h2 id=operation-definition>Operation definition&nbsp;<a class=headline-hash href=#operation-definition>¶</a></h2><h3 id=ompbarrier-mlirompbarrierop><code>omp.barrier</code> (::mlir::omp::BarrierOp)&nbsp;<a class=headline-hash href=#ompbarrier-mlirompbarrierop>¶</a></h3><p>barrier construct</p><p>Syntax:</p><pre><code>operation ::= `omp.barrier` attr-dict
</code></pre><p>The barrier construct specifies an explicit barrier at the point at which
the construct appears.</p><h3 id=ompflush-mlirompflushop><code>omp.flush</code> (::mlir::omp::FlushOp)&nbsp;<a class=headline-hash href=#ompflush-mlirompflushop>¶</a></h3><p>flush construct</p><p>Syntax:</p><pre><code>operation ::= `omp.flush` ( `(` $varList^ `:` type($varList) `)` )? attr-dict
</code></pre><p>The flush construct executes the OpenMP flush operation. This operation
makes a thread’s temporary view of memory consistent with memory and
enforces an order on the memory operations of the variables explicitly
specified or implied.</p><h4 id=operands>Operands:&nbsp;<a class=headline-hash href=#operands>¶</a></h4><table><thead><tr><th align=center>Operand</th><th>Description</th></tr></thead><tbody><tr><td align=center><code>varList</code></td><td>any type</td></tr></tbody></table><h3 id=ompmaster-mlirompmasterop><code>omp.master</code> (::mlir::omp::MasterOp)&nbsp;<a class=headline-hash href=#ompmaster-mlirompmasterop>¶</a></h3><p>master construct</p><p>Syntax:</p><pre><code>operation ::= `omp.master` $region attr-dict
</code></pre><p>The master construct specifies a structured block that is executed by
the master thread of the team.</p><h3 id=ompparallel-mlirompparallelop><code>omp.parallel</code> (::mlir::omp::ParallelOp)&nbsp;<a class=headline-hash href=#ompparallel-mlirompparallelop>¶</a></h3><p>parallel construct</p><p>The parallel construct includes a region of code which is to be executed
by a team of threads.</p><p>The optional $if_expr_var parameter specifies a boolean result of a
conditional check. If this value is 1 or is not provided then the parallel
region runs as normal, if it is 0 then the parallel region is executed with
one thread.</p><p>The optional $num_threads_var parameter specifies the number of threads which
should be used to execute the parallel region.</p><p>The optional $default_val attribute specifies the default data sharing attribute
of values used in the parallel region that are not passed explicitly as parameters
to the operation.</p><p>The $private_vars, $firstprivate_vars, $shared_vars and $copyin_vars parameters
are a variadic list of values that specify the data sharing attribute of
those values.</p><p>The $allocators_vars and $allocate_vars parameters are a variadic list of values
that specify the memory allocator to be used to obtain storage for private values.</p><p>The optional $proc_bind_val attribute controls the thread affinity for the execution
of the parallel region.</p><h4 id=attributes>Attributes:&nbsp;<a class=headline-hash href=#attributes>¶</a></h4><table><thead><tr><th align=center>Attribute</th><th align=center>MLIR Type</th><th>Description</th></tr></thead><tbody><tr><td align=center><code>default_val</code></td><td align=center>::mlir::StringAttr</td><td>default clause</td></tr><tr><td align=center><code>proc_bind_val</code></td><td align=center>::mlir::StringAttr</td><td>ProcBindKind Clause</td></tr></tbody></table><h4 id=operands-1>Operands:&nbsp;<a class=headline-hash href=#operands-1>¶</a></h4><table><thead><tr><th align=center>Operand</th><th>Description</th></tr></thead><tbody><tr><td align=center><code>if_expr_var</code></td><td>any type</td></tr><tr><td align=center><code>num_threads_var</code></td><td>any type</td></tr><tr><td align=center><code>private_vars</code></td><td>any type</td></tr><tr><td align=center><code>firstprivate_vars</code></td><td>any type</td></tr><tr><td align=center><code>shared_vars</code></td><td>any type</td></tr><tr><td align=center><code>copyin_vars</code></td><td>any type</td></tr><tr><td align=center><code>allocate_vars</code></td><td>any type</td></tr><tr><td align=center><code>allocators_vars</code></td><td>any type</td></tr></tbody></table><h3 id=omptaskwait-mliromptaskwaitop><code>omp.taskwait</code> (::mlir::omp::TaskwaitOp)&nbsp;<a class=headline-hash href=#omptaskwait-mliromptaskwaitop>¶</a></h3><p>taskwait construct</p><p>Syntax:</p><pre><code>operation ::= `omp.taskwait` attr-dict
</code></pre><p>The taskwait construct specifies a wait on the completion of child tasks
of the current task.</p><h3 id=omptaskyield-mliromptaskyieldop><code>omp.taskyield</code> (::mlir::omp::TaskyieldOp)&nbsp;<a class=headline-hash href=#omptaskyield-mliromptaskyieldop>¶</a></h3><p>taskyield construct</p><p>Syntax:</p><pre><code>operation ::= `omp.taskyield` attr-dict
</code></pre><p>The taskyield construct specifies that the current task can be suspended
in favor of execution of a different task.</p><h3 id=ompterminator-mlirompterminatorop><code>omp.terminator</code> (::mlir::omp::TerminatorOp)&nbsp;<a class=headline-hash href=#ompterminator-mlirompterminatorop>¶</a></h3><p>terminator for OpenMP regions</p><p>Syntax:</p><pre><code>operation ::= `omp.terminator` attr-dict
</code></pre><p>A terminator operation for regions that appear in the body of OpenMP
operation. These regions are not expected to return any value so the
terminator takes no operands. The terminator op returns control to the
enclosing op.</p><h3 id=ompwsloop-mlirompwsloopop><code>omp.wsloop</code> (::mlir::omp::WsLoopOp)&nbsp;<a class=headline-hash href=#ompwsloop-mlirompwsloopop>¶</a></h3><p>workshare loop construct</p><p>The workshare loop construct specifies that the iterations of the loop(s)
will be executed in parallel by threads in the current context. These
iterations are spread across threads that already exist in the enclosing
parallel region.</p><p>The body region can contain any number of blocks. The region is terminated
by &ldquo;omp.yield&rdquo; instruction without operands.</p><pre><code>  omp.wsloop (%i1, %i2) = (%c0, %c0) to (%c10, %c10) step (%c1, %c1) {
    %a = load %arrA[%i1, %i2] : memref&lt;?x?xf32&gt;
    %b = load %arrB[%i1, %i2] : memref&lt;?x?xf32&gt;
    %sum = addf %a, %b : f32
    store %sum, %arrC[%i1, %i2] : memref&lt;?x?xf32&gt;
    omp.yield
  }
</code></pre><p><code>private_vars</code>, <code>firstprivate_vars</code>, <code>lastprivate_vars</code> and <code>linear_vars</code>
arguments are variadic list of operands that specify the data sharing
attributes of the list of values. The <code>linear_step_vars</code> operand
additionally specifies the step for each associated linear operand. Note
that the <code>linear_vars</code> and <code>linear_step_vars</code> variadic lists should contain
the same number of elements.</p><p>The optional <code>schedule_val</code> attribute specifies the loop schedule for this
loop, determining how the loop is distributed across the parallel threads.
The optional <code>schedule_chunk_var</code> associated with this determines further
controls this distribution.</p><p>The optional <code>collapse_val</code> attribute specifies the number of loops which
are collapsed to form the worksharing loop.</p><p>The <code>nowait</code> attribute, when present, signifies that there should be no
implicit barrier at the end of the loop.</p><p>The optional <code>ordered_val</code> attribute specifies how many loops are associated
with the do loop construct.</p><p>The optional <code>order</code> attribute specifies which order the iterations of the
associate loops are executed in. Currently the only option for this
attribute is &ldquo;concurrent&rdquo;.</p><h4 id=attributes-1>Attributes:&nbsp;<a class=headline-hash href=#attributes-1>¶</a></h4><table><thead><tr><th align=center>Attribute</th><th align=center>MLIR Type</th><th>Description</th></tr></thead><tbody><tr><td align=center><code>schedule_val</code></td><td align=center>::mlir::StringAttr</td><td>ScheduleKind Clause</td></tr><tr><td align=center><code>collapse_val</code></td><td align=center>::mlir::IntegerAttr</td><td>64-bit signless integer attribute whose minimum value is 0</td></tr><tr><td align=center><code>nowait</code></td><td align=center>::mlir::UnitAttr</td><td>unit attribute</td></tr><tr><td align=center><code>ordered_val</code></td><td align=center>::mlir::IntegerAttr</td><td>64-bit signless integer attribute whose minimum value is 0</td></tr><tr><td align=center><code>order_val</code></td><td align=center>::mlir::StringAttr</td><td>OrderKind Clause</td></tr></tbody></table><h4 id=operands-2>Operands:&nbsp;<a class=headline-hash href=#operands-2>¶</a></h4><table><thead><tr><th align=center>Operand</th><th>Description</th></tr></thead><tbody><tr><td align=center><code>lowerBound</code></td><td>integer or index or LLVM integer type</td></tr><tr><td align=center><code>upperBound</code></td><td>integer or index or LLVM integer type</td></tr><tr><td align=center><code>step</code></td><td>integer or index or LLVM integer type</td></tr><tr><td align=center><code>private_vars</code></td><td>any type</td></tr><tr><td align=center><code>firstprivate_vars</code></td><td>any type</td></tr><tr><td align=center><code>lastprivate_vars</code></td><td>any type</td></tr><tr><td align=center><code>linear_vars</code></td><td>any type</td></tr><tr><td align=center><code>linear_step_vars</code></td><td>any type</td></tr><tr><td align=center><code>schedule_chunk_var</code></td><td>any type</td></tr></tbody></table><h3 id=ompyield-mlirompyieldop><code>omp.yield</code> (::mlir::omp::YieldOp)&nbsp;<a class=headline-hash href=#ompyield-mlirompyieldop>¶</a></h3><p>loop yield and termination operation</p><p>Syntax:</p><pre><code>operation ::= `omp.yield` ( `(` $results^ `:` type($results) `)` )? attr-dict
</code></pre><p>&ldquo;omp.yield&rdquo; yields SSA values from the OpenMP dialect op region and
terminates the region. The semantics of how the values are yielded is
defined by the parent operation.
If &ldquo;omp.yield&rdquo; has any operands, the operands must match the parent
operation&rsquo;s results.</p><h4 id=operands-3>Operands:&nbsp;<a class=headline-hash href=#operands-3>¶</a></h4><table><thead><tr><th align=center>Operand</th><th>Description</th></tr></thead><tbody><tr><td align=center><code>results</code></td><td>any type</td></tr></tbody></table><div class=edit-meta><br></div><nav class=pagination><a class="nav nav-prev" href=/docs/Dialects/NVVMDialect/ title="'nvvm' Dialect"><i class="fas fa-arrow-left" aria-hidden=true></i>Prev - 'nvvm' Dialect</a>
<a class="nav nav-next" href=/docs/Dialects/PDLOps/ title="'pdl' Dialect">Next - 'pdl' Dialect <i class="fas fa-arrow-right" aria-hidden=true></i></a></nav><footer><p class=powered>Powered by <a href=https://gohugo.io>Hugo</a>. Theme by <a href=https://themes.gohugo.io/hugo-theme-techdoc/>TechDoc</a>. Designed by <a href=https://github.com/thingsym/hugo-theme-techdoc>Thingsym</a>.</p></footer></main><div class=sidebar><nav class=slide-menu><ul><li><a href=https://mlir.llvm.org/>Home</a></li><li><a href=/talks/>Talks and Related Publications</a></li><li><a href=/users/>Users of MLIR</a></li><li class=has-sub-menu><a href=/getting_started/>Getting Started<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=/getting_started/Debugging/>Debugging</a></li><li><a href=/getting_started/Faq/>FAQ</a></li><li><a href=/getting_started/Contributing/>How to Contribute</a></li><li><a href=/getting_started/DeveloperGuide/>Developer Guide</a></li><li><a href=/getting_started/openprojects/>Open Projects</a></li><li><a href=/getting_started/Glossary/>Glossary</a></li><li><a href=/getting_started/TestingGuide/>Testing Guide</a></li></ul></li><li class="parent has-sub-menu"><a href=/docs/>Code Documentation<span class="mark opened">-</span></a><ul class=sub-menu><li class=has-sub-menu><a href=/docs/Bindings/>Bindings<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=/docs/Bindings/Python/>MLIR Python Bindings</a></li></ul></li><li class="parent has-sub-menu"><a href=/docs/Dialects/>Dialects<span class="mark opened">-</span></a><ul class=sub-menu><li><a href=/docs/Dialects/Builtin/></a></li><li><a href=/docs/Dialects/OpenACCDialect/>'acc' Dialect</a></li><li><a href=/docs/Dialects/Affine/>'affine' Dialect</a></li><li><a href=/docs/Dialects/ArmNeon/>'arm_neon' Dialect</a></li><li><a href=/docs/Dialects/AsyncDialect/>'async' Dialect</a></li><li><a href=/docs/Dialects/AVX512/>'avx512' Dialect</a></li><li><a href=/docs/Dialects/GPU/>'gpu' Dialect</a></li><li><a href=/docs/Dialects/Linalg/>'linalg' Dialect</a></li><li><a href=/docs/Dialects/LLVM/>'llvm' Dialect</a></li><li><a href=/docs/Dialects/LLVMArmNeon/>'llvm_arm_neon' Dialect</a></li><li><a href=/docs/Dialects/LLVMArmSve/>'llvm_arm_sve' Dialect</a></li><li><a href=/docs/Dialects/LLVMAVX512/>'llvm_avx512' Dialect</a></li><li><a href=/docs/Dialects/NVVMDialect/>'nvvm' Dialect</a></li><li class=active><a href=/docs/Dialects/OpenMPDialect/>'omp' Dialect</a></li><li><a href=/docs/Dialects/PDLOps/>'pdl' Dialect</a></li><li><a href=/docs/Dialects/PDLInterpOps/>'pdl_interp' Dialect</a></li><li><a href=/docs/Dialects/QuantDialect/>'quant' Dialect</a></li><li><a href=/docs/Dialects/ROCDLDialect/>'rocdl' Dialect</a></li><li><a href=/docs/Dialects/SCFDialect/>'scf' Dialect</a></li><li><a href=/docs/Dialects/ShapeDialect/>'shape' Dialect</a></li><li><a href=/docs/Dialects/SPIR-V/>'spv' Dialect</a></li><li><a href=/docs/Dialects/Standard/>'std' Dialect</a></li><li><a href=/docs/Dialects/TensorOps/>'tensor' Dialect</a></li><li><a href=/docs/Dialects/Vector/>'vector' Dialect</a></li><li><a href=/docs/Dialects/TOSA/>Tensor Operator Set Architecture (TOSA) Dialect</a></li></ul></li><li><a href=/docs/TensorPasses/></a></li><li><a href=/docs/EDSC/>Background: declarative builders API</a></li><li><a href=/docs/Bufferization/>Bufferization on MLIR</a></li><li><a href=/docs/ConversionToLLVMDialect/>Conversion to the LLVM Dialect</a></li><li><a href=/docs/Diagnostics/>Diagnostic Infrastructure</a></li><li><a href=/docs/DialectConversion/>Dialect Conversion</a></li><li><a href=/docs/Interfaces/>Interfaces</a></li><li><a href=/docs/CAPI/>MLIR C API</a></li><li><a href=/docs/LangRef/>MLIR Language Reference</a></li><li><a href=/docs/Canonicalization/>Operation Canonicalization</a></li><li><a href=/docs/OpDefinitions/>Operation Definition Specification (ODS)</a></li><li><a href=/docs/PassManagement/>Pass Infrastructure</a></li><li><a href=/docs/Passes/>Passes</a></li><li><a href=/docs/PatternRewriter/>Pattern Rewriting : Generic DAG-to-DAG Rewriting</a></li><li><a href=/docs/Quantization/>Quantization</a></li><li class=has-sub-menu><a href=/docs/Rationale/>Rationale<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=/docs/Rationale/RationaleGenericDAGRewriter/>Generic DAG Rewriter Infrastructure Rationale</a></li><li><a href=/docs/Rationale/RationaleLinalgDialect/>Linalg Dialect Rationale: The Case For Compiler-Friendly Custom Operations</a></li><li><a href=/docs/Rationale/Rationale/>MLIR Rationale</a></li><li><a href=/docs/Rationale/MLIRForGraphAlgorithms/>MLIR: Incremental Application to Graph Algorithms in ML Frameworks</a></li><li><a href=/docs/Rationale/RationaleSimplifiedPolyhedralForm/>MLIR: The case for a simplified polyhedral form</a></li><li><a href=/docs/Rationale/UsageOfConst/>Usage of 'const' in MLIR, for core IR types</a></li></ul></li><li><a href=/docs/ShapeInference/>Shape Inference</a></li><li><a href=/docs/SPIRVToLLVMDialectConversion/>SPIR-V Dialect to LLVM Dialect conversion manual</a></li><li><a href=/docs/SymbolsAndSymbolTables/>Symbols and Symbol Tables</a></li><li><a href=/docs/DeclarativeRewrites/>Table-driven Declarative Rewrite Rule (DRR)</a></li><li><a href=/docs/Traits/>Traits</a></li><li class=has-sub-menu><a href=/docs/Tutorials/>Tutorials<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=/docs/Tutorials/CreatingADialect/>Creating a Dialect</a></li><li><a href=/docs/Tutorials/DefiningAttributesAndTypes/>Defining Dialect Attributes and Types</a></li><li><a href=/docs/Tutorials/QuickstartRewrites/>Quickstart tutorial to adding MLIR graph rewrite</a></li><li class=has-sub-menu><a href=/docs/Tutorials/Toy/>Toy Tutorial<span class="mark closed">+</span></a><ul class=sub-menu><li><a href=/docs/Tutorials/Toy/Ch-1/>Chapter 1: Toy Language and AST</a></li><li><a href=/docs/Tutorials/Toy/Ch-2/>Chapter 2: Emitting Basic MLIR</a></li><li><a href=/docs/Tutorials/Toy/Ch-3/>Chapter 3: High-level Language-Specific Analysis and Transformation</a></li><li><a href=/docs/Tutorials/Toy/Ch-4/>Chapter 4: Enabling Generic Transformation with Interfaces</a></li><li><a href=/docs/Tutorials/Toy/Ch-5/>Chapter 5: Partial Lowering to Lower-Level Dialects for Optimization</a></li><li><a href=/docs/Tutorials/Toy/Ch-6/>Chapter 6: Lowering to LLVM and CodeGeneration</a></li><li><a href=/docs/Tutorials/Toy/Ch-7/>Chapter 7: Adding a Composite Type to Toy</a></li></ul></li><li><a href=/docs/Tutorials/UnderstandingTheIRStructure/>Understanding the IR Structure</a></li></ul></li></ul></li></ul></nav><div class=sidebar-footer></div></div></div><a href=# id=backtothetop-fixed class=backtothetop data-backtothetop-duration=600 data-backtothetop-easing=easeOutQuart data-backtothetop-fixed-fadein=1000 data-backtothetop-fixed-fadeout=1000 data-backtothetop-fixed-bottom=10 data-backtothetop-fixed-right=20><span class="fa-layers fa-fw"><i class="fas fa-circle"></i><i class="fas fa-arrow-circle-up"></i></span></a></div></body></html>